@import views.html.dataset.jsonTable
@import play.api.libs.json.JsObject
@import models.{Field, Filter}
@import controllers.dataset.DataSetRouter

@import org.incal.play.Page
@(
    page: Page[JsObject],
    filter: Option[Filter],
    tableFields: Traversable[Field],
    dataSetRouter: DataSetRouter,
    withRowClickableJs: Boolean = false,
    tableDivId: Option[String] = None
)(
    implicit request: Request[_]
)

@jsonTableAux = {
    @jsonTable(
        page,
        tableFields,
        dataSetRouter.getTable(_, _,
            tableFields.map(_.name).toSeq,
            filter.map(_.conditionsOrId).getOrElse(Left(Nil))
        ),
        Some(dataSetRouter.get),
        withRowClickableJs,
        true
    )
}

@if(page.items.nonEmpty) {
    @if(tableDivId.isEmpty) {
        @jsonTableAux
    } else {
        <div id='@tableDivId.get' class="table-div">
            @jsonTableAux
        </div>
    }
}