@import views.html.elements.labelValue
@import views.html.table.{dynamicStringTable, dynamicTableJsImport}
@import views.html.dataset.dynamicFieldTable

@(
    includeChiSquareSelector: Boolean = false,
    includeOutputField: Boolean = true,
    extraFields: Option[Html] = None
)

@dynamicTableJsImport()

@modalBody(defaultFeaturesToSelectNum: Int, defaultDiscretizerBucketsNum: Int) = {
    <fieldset>
        @labelValue("featuresToSelectNum", "Features Num", false, None, 4) {
            <input id="featuresToSelectNum" name="featuresToSelectNum" value="@defaultFeaturesToSelectNum">
        }
        @labelValue("discretizerBucketsNum", "Discretizer Buckets Num", false, None, 4) {
            <input id="discretizerBucketsNum" name="discretizerBucketsNum" value="@defaultDiscretizerBucketsNum">
        }
    </fieldset>
}

@buttons = {
    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
    <button type="button" id="submitButton" class="btn btn-primary" data-dismiss="modal" onclick="selectFeaturesAsChiSquare(); return false;">OK</button>
}

@extraFieldButtons = {
    <a id="addAllFieldsButton" class="btn btn-info btn-sm" href="#" onclick="addAllFields();" data-toggle="tooltip" title="Add All Fields">
        <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> All
    </a>
    @if(includeChiSquareSelector) {
        <a id="chiSquareFieldSelectionButton" class="btn btn-info btn-sm" data-toggle="modal" data-target="#chiSquareFeatureSelectionModal" title="Chi-Square Feature Selection">
            <span class="glyphicon glyphicon-minus" aria-hidden="true"></span> Chi-Square
        </a>
        @modal("chiSquareFeatureSelectionModal", "Chi-Square Feature Selection", modalBody(4, 10), None, Some(buttons))
    }
}

<div class="row">
    <div class="col-md-12">
        <form>
            <fieldset>
                @labelValue("mlModel", "ML Model") {
                    <input id="mlModelTypeahead" class="typeahead typeahead-large" type="text" placeholder="ML Model" value="">
                    <input id="mlModelId" name="mlModelId" type="hidden" value="">
                }
                @if(includeOutputField) {
                    @labelValue("outputField", "Output Field") {
                        <input id="outputFieldTypeahead" class="typeahead typeahead-large" type="text" placeholder="Field Name" value="">
                        <input id="outputFieldName" name="outputFieldName" type="hidden" value="">
                    }
                }
                @labelValue("inputFieldNames", "Input Field Names") {
                    @dynamicFieldTable("inputFieldName", Nil, false, 5, Some(extraFieldButtons))
                }
                @labelValue("filterId", "Filter") {
                    <input id="filterNameTypeahead" class="typeahead typeahead-large" type="text" placeholder="Filter" value="">
                    <input id="filterId" name="filterId" type="hidden" value="">
                }
                <hr/>
                @labelValue("pcaDims", "PCA Dims") {
                    <input id="pcaDims" type="text" class="input-lg" placeholder="PCA Dims" value="">
                }
                @if(extraFields.isDefined) {
                    @extraFields.get
                }
            </fieldset>

            <div class="actions pull-right">
                <button id="launchButton" type="button" class="btn btn-primary">Submit</button>
            </div>
        </form>
    </div>
</div>

<hr/>

<div class="row">
    <div class="col-md-6">
        <div id="outputDiv">
        </div>
    </div>
</div>