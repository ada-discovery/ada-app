@import models.CsvDataSetImportInfo
@import views.html.datasetimport.{settingPanel, fileOrPathInput, dataSetInfoPanel}
@import views.html.elements._
@import play.api.i18n.Messages

@(form: Form[CsvDataSetImportInfo])(implicit msg: Messages)

@dataSetInfoPanel("csvDataSetImportInfo", form)

<input type="hidden" id="concreteClass" name="concreteClass" value="@{classOf[CsvDataSetImportInfo].getName}">

<div class="panel panel-default">
    <div class="panel-heading">File</div>
    <div class="panel-body">
        @fileOrPathInput("csvDataSetImportInfo", "sourceChoice", "Source", "importFile", "path", form)
        @inputText("csvDataSetImportInfo", "delimiter", form)
        @inputText("csvDataSetImportInfo", "eol", form)
        @inputText("csvDataSetImportInfo", "charsetName", form)
    </div>
</div>

@settingPanel(form)

<script type="text/javascript">
    $('form').submit(function(ev) {
        ev.preventDefault();
        handleSettingSubmission();

        var importLocalFile = $('input[name="sourceChoice"]:checked').val() == "1"
        if (importLocalFile)
            // if local file provided remove the path field by erasing its name
            $('#path').attr("name", '');
        else
            // otherwise remove the import file field
            $('#importFile').attr("name", '');

        this.submit();
    });
</script>