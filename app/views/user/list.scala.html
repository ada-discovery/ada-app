@import views.html.layout
@import views.html.table.paginatedTable

@import models.security.CustomUser

@(page: Page[CustomUser])(implicit flash: play.api.mvc.Flash, msg: play.api.i18n.Messages, request: RequestHeader)

@actions = {
    <div class="row">
        <div class="col-md-8">
            @filter(page.filter, routes.UserController.find(),  Left(Seq("firstName", "lastName", "email", "affiliation")))
        </div>
        <div class="col-md-4">
            <a class="btn btn-success btn-sm pull-right" id="add" href="@routes.UserController.create()">Add a new user</a>
        </div>
    </div>
}

@table = @{
    paginatedTable(
        page,
        routes.UserController.find(_, _, page.filter),
        Seq(
            ("name", "Name", {item : Any => Html(item.asInstanceOf[CustomUser].name)})
            //("address", "Address", {item : Any => Html(item.asInstanceOf[User].address.getOrElse(""))}),
            //("dob", "Date of Birth", {item : Any => Html(item.asInstanceOf[User].dob.getOrElse(new java.util.Date()).format("dd MMM yyyy"))}),
            //("joiningDate", "Joining Date", {item : Any => Html(item.asInstanceOf[User].joiningDate.getOrElse(new java.util.Date()).format("dd MMM yyyy"))}),
            //("designation", "Designation", {item : Any => Html(item.asInstanceOf[User].designation.getOrElse(""))})
        ),
        Some({ item : Any => routes.UserController.get(item.asInstanceOf[CustomUser]._id.get)})
    )
}

@layout.list(
    "user",
    page.total,
    actions,
    table,
    None
)